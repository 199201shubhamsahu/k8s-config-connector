apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  annotations:
    cnrm.cloud.google.com/project-id: #YOUR_PROJECT_ID
  name: eventarctrigger-iam-gsa
  namespace: #YOUR_NAMESPACE
spec:
  displayName: ExampleGSA-EventArc-POC
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicyMember
metadata:
  name: eventarctrigger-iam-gsa-wf
  namespace: config-control
spec:
  memberFrom:
    serviceAccountRef:
      name: eventarctrigger-iam-gsa
  role: roles/workflows.admin
  resourceRef:
    kind: Project
    external: #YOUR_PROJECT_ID
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicyMember
metadata:
  name: eventarctrigger-iam-gsa-ev
  namespace: config-control
spec:
  memberFrom:
    serviceAccountRef:
      name: eventarctrigger-iam-gsa
  role: roles/eventarc.admin
  resourceRef:
    kind: Project
    external: #YOUR_PROJECT_ID
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicyMember
metadata:
  name: gcs-bucket-pubsub-publisher
  namespace: config-control
spec:
  member: serviceAccount:service-{#YOUR_PROJECT_ID}@gs-project-accounts.iam.gserviceaccount.com
  role: roles/pubsub.publisher
  resourceRef:
    kind: PubSubTopic
    name: #YOUR_PUBSUB_TOPIC