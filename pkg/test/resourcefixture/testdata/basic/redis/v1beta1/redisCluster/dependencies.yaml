apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeNetwork
metadata:
  name: networks-{uniqueId}
  annotations:
    cnrm.cloud.google.com/deletion-policy: "abandon"
    cnrm.cloud.google.com/management-conflict-prevention-policy: "none"
spec:
  description: Default network for the project
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeSubnetwork
metadata:
  name: subnetworks-{uniqueId}
  annotations:
    cnrm.cloud.google.com/deletion-policy: "abandon"
    cnrm.cloud.google.com/management-conflict-prevention-policy: "none"
spec:
  ipCidrRange: 10.128.0.0/20
  region: us-central1
  networkRef:
    name: networks-{uniqueId}
---
apiVersion: networkconnectivity.cnrm.cloud.google.com/v1beta
kind: ServiceConnectionPolicy
metadata:
 name: serviceconnpolicys-${uniqueId}
spec:
 location: us-central1
 serviceClass: gcp-memorystore-redis
 description: my basic service connection policy
 networkRef: 
   name: subnetworks-{uniqueId}
 pscConfig:
  subnetworkRefs:
   name: networks-{uniqueId}